<Image 
      loading='lazy'
      alt='Zoro picture'
      width={300}
      height={300}
      src={"https://i.pinimg.com/564x/c0/51/4a/c0514ad71f49a6f94b879b863184e621.jpg"}
      placeholder='blur'
      blurDataURL='data:image/svg+xml;base64,...'
    />


    

  // Define Product Schema
const productSchema = new mongoose.Schema({
  userId: { type: String, required: true },
  name: { type: String, required: true },
  description: { type: String, required: true },
  images: { type: [String], required: true },
});

const Product = mongoose.model('Product', productSchema);

// API route to save product
app.post('/api/products', async (req, res) => {
  const { userId, name, description, images } = req.body;

  try {
    const newProduct = new Product({ userId, name, description, images });
    await newProduct.save();
    res.status(201).json({ message: 'Product added successfully', product: newProduct });
  } catch (error) {
    res.status(500).json({ message: 'Error adding product', error });
  }
});



const handlePublish = async () => {
  const token = localStorage.getItem('token');
  if (!token) {
    router.push('/');
    return;
  }

  try {
    const response = await fetch('https://online-marketplace-backend-six.vercel.app/api/products', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        userId: user?.userId,
        productName,
        description,
        images,
      }),
    });

    if (response.ok) {
      // Product saved successfully
      console.log('Product published');
      // Clear form fields or perform any other necessary actions
      setproductName('');
      setDescription('');
      setImages([]);
      const modal = document.getElementById('my_modal_3') as HTMLDialogElement;
      if (modal) {
        modal.close();
      }
    } else {
      const data = await response.json();
      console.error('Error publishing product:', data);
    }
  } catch (error) {
    console.error('Error making request:', error);
  }
};